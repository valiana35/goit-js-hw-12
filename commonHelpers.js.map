{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function fetchHits(inputValue, curentPage) {\n    const searchParams = new URLSearchParams({\n        key: \"42127236-8bfdbbfbeed8a2dadaca720e8\",\n        q: inputValue,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: curentPage,\n        per_page: 15,\n    });\n    const response = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n    return response.data;\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { refs } from '../main';\n\nfunction hitTemplate(hit) {\n    const { largeImageURL, webformatURL, tags, likes, views, comments, downloads } = hit;\n    return `<li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img \n            class=\"gallery-image\"\n            src=\"${webformatURL}\" \n            alt=\"${tags}\"\n        />\n    </a>\n    <div class=\"description\">\n    <p><b>Likes</b>${likes}</p>\n    <p><b>Views</b>${views}</p>\n    <p><b>Comments</b>${comments}</p>\n    <p><b>Downloads</b>${downloads}</p>\n    </div>\n    </li>`\n}\n\nfunction hitsTemplate(hits) {\n    return hits.map(hitTemplate).join(\"\");\n}\n\nexport function renderHits(hits) {\n    const markup = hitsTemplate(hits);\n    refs.gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n}\n\nlet lightbox = new SimpleLightbox(\".gallery a\", { captionDelay: 250, });\nlightbox.on('show.simplelightbox'); ","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchHits } from \"./js/pixabay-api\";\nimport { renderHits } from \"./js/render-functions\";\n\nexport const refs = {\n form: document.querySelector('.form'),\n input: document.querySelector('.form-input'),\n gallery: document.querySelector('.gallery'),\n loader: document.querySelector('.loader'),\n loadBtn: document.querySelector('.loadBtn'),\n}\n\nlet inputValue;\nlet page;\nlet maxHits;\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.loadBtn.addEventListener('click', onLoadBtnClick);\n\nasync function onFormSubmit(event) {\n    event.preventDefault();\n    inputValue = event.target.elements.search.value.trim();\n    if (inputValue === \"\") {\n        return;\n    }\n    page = 1;\n    refs.loader.classList.remove(\"hidden\");\n    try {\n        const data = await fetchHits(inputValue, page);\n        if (data.totalHits === 0) {\n        iziToast.error({\n            position: 'topRight',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n        }\n        maxHits = Math.ceil(data.totalHits / 15);\n        refs.gallery.innerHTML = \"\";\n        renderHits(data.hits);\n    } catch (error) {\n        console.log(error);\n        maxHits = 0;\n        refs.gallery.innerHTML = \"\"; \n    }\n    refs.loader.classList.add(\"hidden\");\n    if (page >= maxHits) {\n        hideLoadBtn();\n    } else {\n        showLoadBtn();\n    };\n    event.target.reset();\n}\n\nasync function onLoadBtnClick() {\n    page += 1;\n    const data = await fetchHits(inputValue, page);\n    renderHits(data.hits);\n    refs.loader.classList.add(\"hidden\");\n    if (page >= maxHits) {\n        hideLoadBtn();\n        iziToast.error({\n            position: \"topRight\",\n            message: \"We're sorry, but you've reached the end of search results\",\n        });\n    } else {\n        showLoadBtn();\n    }\n    const height = refs.gallery.firstElementChild.getBoundingClientRect().height\n    window.scrollBy({\n        top: height * 2,\n        left: 0,\n        behavior: \"smooth\",\n      });\n}\n\nfunction showLoadBtn() {\n    refs.loadBtn.classList.remove(\"hidden\");\n}\n\nfunction hideLoadBtn() {\n    refs.loadBtn.classList.add(\"hidden\");\n}"],"names":["fetchHits","inputValue","curentPage","searchParams","axios","hitTemplate","hit","largeImageURL","webformatURL","tags","likes","views","comments","downloads","hitsTemplate","hits","renderHits","markup","refs","lightbox","SimpleLightbox","page","maxHits","onFormSubmit","onLoadBtnClick","event","data","iziToast","error","hideLoadBtn","showLoadBtn","height"],"mappings":"owBAEO,eAAeA,EAAUC,EAAYC,EAAY,CACpD,MAAMC,EAAe,IAAI,gBAAgB,CACrC,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EAClB,CAAK,EAED,OADiB,MAAME,EAAM,IAAI,4BAA4BD,CAAY,EAAE,GAC3D,IACpB,CCVA,SAASE,EAAYC,EAAK,CACtB,KAAM,CAAE,cAAAC,EAAe,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,EAAGP,EACjF,MAAO;AAAA,oCACyBC,CAAa;AAAA;AAAA;AAAA,mBAG9BC,CAAY;AAAA,mBACZC,CAAI;AAAA;AAAA;AAAA;AAAA,qBAIFC,CAAK;AAAA,qBACLC,CAAK;AAAA,wBACFC,CAAQ;AAAA,yBACPC,CAAS;AAAA;AAAA,UAGlC,CAEA,SAASC,EAAaC,EAAM,CACxB,OAAOA,EAAK,IAAIV,CAAW,EAAE,KAAK,EAAE,CACxC,CAEO,SAASW,EAAWD,EAAM,CAC7B,MAAME,EAASH,EAAaC,CAAI,EAChCG,EAAK,QAAQ,mBAAmB,YAAaD,CAAM,EACnDE,EAAS,QAAO,CACpB,CAEA,IAAIA,EAAW,IAAIC,EAAe,aAAc,CAAE,aAAc,GAAG,CAAG,EACtED,EAAS,GAAG,qBAAqB,EC7B1B,MAAMD,EAAO,CACnB,KAAM,SAAS,cAAc,OAAO,EACpC,MAAO,SAAS,cAAc,aAAa,EAC3C,QAAS,SAAS,cAAc,UAAU,EAC1C,OAAQ,SAAS,cAAc,SAAS,EACxC,QAAS,SAAS,cAAc,UAAU,CAC3C,EAEA,IAAIjB,EACAoB,EACAC,EAEJJ,EAAK,KAAK,iBAAiB,SAAUK,CAAY,EACjDL,EAAK,QAAQ,iBAAiB,QAASM,CAAc,EAErD,eAAeD,EAAaE,EAAO,CAG/B,GAFAA,EAAM,eAAc,EACpBxB,EAAawB,EAAM,OAAO,SAAS,OAAO,MAAM,OAC5CxB,IAAe,GAGnB,CAAAoB,EAAO,EACPH,EAAK,OAAO,UAAU,OAAO,QAAQ,EACrC,GAAI,CACA,MAAMQ,EAAO,MAAM1B,EAAUC,EAAYoB,CAAI,EACzCK,EAAK,YAAc,GACvBC,EAAS,MAAM,CACX,SAAU,WACV,QAAS,0EACrB,CAAS,EAEDL,EAAU,KAAK,KAAKI,EAAK,UAAY,EAAE,EACvCR,EAAK,QAAQ,UAAY,GACzBF,EAAWU,EAAK,IAAI,CACvB,OAAQE,EAAO,CACZ,QAAQ,IAAIA,CAAK,EACjBN,EAAU,EACVJ,EAAK,QAAQ,UAAY,EAC5B,CACDA,EAAK,OAAO,UAAU,IAAI,QAAQ,EAC9BG,GAAQC,EACRO,IAEAC,IAEJL,EAAM,OAAO,QACjB,CAEA,eAAeD,GAAiB,CAC5BH,GAAQ,EACR,MAAMK,EAAO,MAAM1B,EAAUC,EAAYoB,CAAI,EAC7CL,EAAWU,EAAK,IAAI,EACpBR,EAAK,OAAO,UAAU,IAAI,QAAQ,EAC9BG,GAAQC,GACRO,IACAF,EAAS,MAAM,CACX,SAAU,WACV,QAAS,2DACrB,CAAS,GAEDG,IAEJ,MAAMC,EAASb,EAAK,QAAQ,kBAAkB,sBAAuB,EAAC,OACtE,OAAO,SAAS,CACZ,IAAKa,EAAS,EACd,KAAM,EACN,SAAU,QAClB,CAAO,CACP,CAEA,SAASD,GAAc,CACnBZ,EAAK,QAAQ,UAAU,OAAO,QAAQ,CAC1C,CAEA,SAASW,GAAc,CACnBX,EAAK,QAAQ,UAAU,IAAI,QAAQ,CACvC"}